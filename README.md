# 鸿蒙日记应用

一个基于鸿蒙HarmonyOS开发的记事本应用，具有用户注册登录和日记管理功能。

## 功能特性

### 用户管理
- 用户注册：创建新账户
- 用户登录：使用用户名和密码登录
- 数据隔离：每个用户只能看到自己的日记
- 个人中心：查看账号信息、修改密码、退出登录等功能

### 日记管理
- 新建日记：创建新的日记条目
- 查看日记：浏览所有日记列表
- 编辑日记：修改已有日记的标题和内容
- 删除日记：删除不需要的日记
- 时间显示：显示日记的创建和更新时间

### 技术特性
- 本地数据库存储：使用SQLite数据库存储用户和日记数据
- 响应式UI：现代化的用户界面设计
- 数据安全：用户数据本地存储，保护隐私

## 项目结构

```
entry/src/main/ets/
├── pages/
│   ├── Index.ets              # 启动页面（首页）
│   ├── LoginPage.ets          # 登录/注册页面
│   ├── MainPage.ets           # 主页面（包含底部导航）
│   └── DiaryEditPage.ets      # 日记编辑页面
├── utils/
│   ├── DatabaseHelper.ets     # 数据库操作工具类
│   ├── DateUtils.ets          # 日期格式化工具类
│   └── ErrorHandler.ets       # 错误处理工具类
└── entryability/
    └── EntryAbility.ets       # 应用入口
```

## 技术架构

### 前端架构
- **ArkTS**: 使用鸿蒙原生开发语言
- **声明式UI**: 采用声明式编程范式构建用户界面
- **状态管理**: 使用@State装饰器管理组件状态
- **路由管理**: 使用router进行页面跳转

### 数据存储
- **SQLite数据库**: 使用鸿蒙关系型数据库存储用户和日记数据
- **单例模式**: DatabaseHelper采用单例模式确保数据库连接的唯一性
- **事务处理**: 数据库操作包含完整的错误处理机制

### 用户体验
- **响应式设计**: 适配不同屏幕尺寸
- **加载状态**: 提供加载指示器和空状态提示
- **错误处理**: 统一的错误提示和用户反馈
- **动画效果**: 启动页面和交互动画

## 数据库设计

### 用户表 (users)
- id: 主键，自增
- username: 用户名，唯一
- password: 密码
- created_at: 创建时间

### 日记表 (diaries)
- id: 主键，自增
- user_id: 用户ID，外键
- title: 日记标题
- content: 日记内容
- created_at: 创建时间
- updated_at: 更新时间

## 使用说明

### 快速开始

1. **构建项目**
   ```bash
   # Linux/Mac
   chmod +x build.sh
   ./build.sh
   
   # Windows
   build.bat
   ```

2. **运行应用**
   - 在DevEco Studio中打开项目
   - 连接鸿蒙设备或启动模拟器
   - 点击运行按钮部署应用

### 应用使用流程

1. **启动应用**：应用启动后显示启动页面（Index.ets），2秒后自动跳转到登录页面
2. **用户注册**：如果是新用户，点击"还没有账户？点击注册"进行注册
3. **用户登录**：注册成功后，使用用户名和密码登录
4. **主界面**：登录成功后进入主页面，包含底部导航栏：
   - **首页**：显示日记列表，可以查看、新建、编辑、删除日记
   - **个人**：个人中心，包含账号信息、修改密码、关于应用、退出登录等功能
5. **日记管理**：
   - 查看日记：登录后进入日记列表页面，可以看到所有日记
   - 新建日记：点击右上角"新建"按钮创建新日记
   - 编辑日记：点击日记项的"编辑"按钮修改日记
   - 删除日记：点击日记项的"删除"按钮删除日记

## 开发环境

- DevEco Studio
- HarmonyOS SDK
- TypeScript/ArkTS

## 权限说明

应用需要以下权限：
- `ohos.permission.READ_MEDIA`: 用于访问本地数据库存储日记数据

## 注意事项

- 所有数据存储在本地，卸载应用会丢失数据
- 密码以明文存储，仅用于演示，实际应用中应加密存储
- 建议定期备份重要日记数据

## 常见问题

### 构建问题
**Q: 构建时出现权限错误**
A: 确保已安装鸿蒙SDK并配置正确的环境变量

**Q: 数据库初始化失败**
A: 检查应用权限配置，确保已添加数据库访问权限

### 运行时问题
**Q: 应用启动后白屏**
A: 检查页面路由配置，确保SplashPage正确设置为首页

**Q: 数据库操作失败**
A: 检查设备存储空间，确保有足够的空间创建数据库文件

### 开发问题
**Q: 如何添加新的日记字段**
A: 修改DatabaseHelper.ets中的表结构和相关方法

**Q: 如何自定义UI样式**
A: 修改对应页面的build方法中的样式属性

## 扩展功能建议

- 添加日记分类功能
- 支持图片附件
- 添加日记搜索功能
- 支持数据导出备份
- 添加主题切换功能
- 支持日记分享功能
